{"version":3,"sources":["../../../src/api/users/users.dao.js"],"names":["helpers","$config","pgp","cs","ColumnSet","name","def","prop","table","schema","UserDao","any","select","selectDistinct","user","none","create","groupid","steamid","steamid64","groupId","selectByGroupId","users","task","query","insert","t"],"mappings":";;;;;;;;AAAA;;;;AACA;;;;;;;;AAEA,IAAMA,UAAU,mBAAGC,OAAH,CAAWC,GAAX,CAAeF,OAA/B;AACA,IAAMG,KAAK,IAAIH,QAAQI,SAAZ,CAAsB,CAAC,EAACC,MAAM,UAAP,EAAmBC,KAAK,CAAxB,EAAD,EACD,EAACD,MAAM,mBAAP,EAA4BE,MAAM,mBAAlC,EADC,EAED,EAACF,MAAM,aAAP,EAAsBE,MAAM,aAA5B,EAFC,CAAtB,EAGqB,EAACC,OAAO,EAACA,OAAM,YAAP,EAAqBC,QAAO,QAA5B,EAAR,EAHrB,CAAX;;IAKqBC,O;;;;;;;8BAEJ;AACT,mBAAO,mBAAGC,GAAH,CAAO,gBAAIC,MAAX,CAAP;AACH;;;yCACsB;AACnB,mBAAO,mBAAGD,GAAH,CAAO,gBAAIE,cAAX,CAAP;AACH;;;6BAEWC,I,EAAM;AACd,mBAAO,mBAAGC,IAAH,CAAQ,gBAAIC,MAAZ,EAAoB,CAACF,KAAKG,OAAN,EAAeH,KAAKI,OAApB,EAA6BJ,KAAKK,SAAlC,CAApB,CAAP;AACH;;;6CAE2BC,O,EAAQ;AAChC,mBAAO,mBAAGT,GAAH,CAAO,gBAAIU,eAAX,EAA4B,CAACD,OAAD,CAA5B,CAAP;AACH;;;kCAEgBE,K,EAAO;AACpB,mBAAO,mBAAGC,IAAH,CAAQ,aAAK;AAChB,oBAAMC,QAAQxB,QAAQyB,MAAR,CAAeH,KAAf,EAAsBnB,EAAtB,CAAd;AACA,uBAAOuB,EAAEX,IAAF,CAAOS,KAAP,CAAP;AACH,aAHM,CAAP;AAIH;;;;;;kBAtBgBd,O","file":"users.dao.js","sourcesContent":["import sql from './sql/index';\nimport db from '../../config/database';\n\nconst helpers = db.$config.pgp.helpers;\nconst cs = new helpers.ColumnSet([{name: 'steam_id', def: 0},\n                                {name: 'steam_group_id_64', prop: 'steam_group_id_64'},\n                                {name: 'steam_id_64', prop: 'steam_id_64'}],\n                                {table: {table:'csgo_users', schema:'public'}});\n\nexport default class UserDao {\n\n    static all() {\n        return db.any(sql.select);\n    }\n    static selectDistinct(){\n        return db.any(sql.selectDistinct);\n    }\n\n    static save(user) {\n        return db.none(sql.create, [user.groupid, user.steamid, user.steamid64]);\n    }\n\n    static selectUsersByGroupId(groupId){\n        return db.any(sql.selectByGroupId, [groupId]);\n    }\n\n    static saveUsers(users) {\n        return db.task(t => {\n            const query = helpers.insert(users, cs);\n            return t.none(query);\n        });\n    }\n\n\n}\n"]}