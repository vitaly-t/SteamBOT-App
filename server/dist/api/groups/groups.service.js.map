{"version":3,"sources":["../../../src/api/groups/groups.service.js"],"names":["GroupsService","group","save","all","groupName","csgoApiData","parsedData","csgoGroup","id","memberList","groupID64","name","groupDetails","siteUrl","groupURL","groupId","processCSGOUsers"],"mappings":";;;;;;;;AAAA;;;;AACA;;;;AAEA;;;;AACA;;;;;;;;;;IAGqBA,a;;;;;;;+BAEHC,K,EAAM;AAChB,mBAAO,iBAAUC,IAAV,CAAeD,KAAf,CAAP;AACH;;;iCAEc;AACX,mBAAO,iBAAUE,GAAV,EAAP;AACH;;;;kFAEuCC,S;;;;;;;;uCAGN,oBAAQA,SAAR,C;;;AAApBC,2C;;uCAEmB,yBAAUA,WAAV,C;;;AAAnBC,0C;AAEAC,yC,GAAY;AACdC,wCAAIF,WAAWG,UAAX,CAAsBC,SADZ;AAEdC,0CAAML,WAAWG,UAAX,CAAsBG,YAAtB,CAAmCR,SAF3B;AAGdS,6CAASP,WAAWG,UAAX,CAAsBG,YAAtB,CAAmCE;AAH9B,iC;;uCAMI,iBAAUZ,IAAV,CAAeK,SAAf,C;;;AAAhBQ,uC;;oCAEFA,O;;;;;;uCACM,gBAAaC,gBAAb,CAA8BT,UAAUC,EAAxC,EAA4CF,UAA5C,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;kBA1BDN,a","file":"groups.service.js","sourcesContent":["import GroupsDao from './groups.dao';\nimport UsersService from '../users/users.service';\n\nimport csgoApi from '../csgo/csgo.service';\nimport xmltojson from '../../utils/xmltojson';\n\n\nexport default class GroupsService{\n\n    static create(group){\n        return GroupsDao.save(group);\n    }\n\n    static getAll(){\n        return GroupsDao.all();\n    }\n\n    static async processCSGOGroupsAndUsers (groupName)  {\n\n        try{\n            const csgoApiData = await csgoApi(groupName);\n\n            const parsedData = await xmltojson(csgoApiData);\n\n            const csgoGroup = {\n                id: parsedData.memberList.groupID64,\n                name: parsedData.memberList.groupDetails.groupName,\n                siteUrl: parsedData.memberList.groupDetails.groupURL\n            };\n\n            const groupId = await GroupsDao.save(csgoGroup);\n\n            if(!groupId)\n                await UsersService.processCSGOUsers(csgoGroup.id, parsedData);\n\n        }catch (err){\n            return err;\n        }\n\n    }\n\n}\n\n\n"]}