{"version":3,"sources":["../../../src/api/groups/groups.dao.js"],"names":["GroupsDao","any","select","group","task","t","oneOrNone","selectByGroupId","id","g","steam_group_id_64","then","groupId","none","create","name","siteUrl","idGroup"],"mappings":";;;;;;;;AAAA;;;;AACA;;;;;;;;IAEqBA,S;;;;;;;8BAEJ;AACT,mBAAO,mBAAGC,GAAH,CAAO,gBAAIC,MAAX,CAAP;AACH;;;6BAEWC,K,EAAO;AACf,mBAAO,mBAAGC,IAAH,CAAQ,aAAK;AAChB,uBAAOC,EAAEC,SAAF,CAAY,gBAAIC,eAAhB,EAAiCJ,MAAMK,EAAvC,EAA2C;AAAA,2BAAKC,KAAKA,EAAEC,iBAAZ;AAAA,iBAA3C,EACFC,IADE,CACG,mBAAW;AACb,2BAAOC,WAAWP,EAAEQ,IAAF,CAAO,gBAAIC,MAAX,EAAmB,CAACX,MAAMK,EAAP,EAAWL,MAAMY,IAAjB,EAAuBZ,MAAMa,OAA7B,CAAnB,CAAlB;AACH,iBAHE,CAAP;AAIH,aALM,CAAP;AAMH;;;wCAEsBC,O,EAAQ;AAC3B,mBAAO,mBAAGhB,GAAH,CAAO,gBAAIM,eAAX,EAA4B,CAACU,OAAD,CAA5B,CAAP;AACH;;;;;;kBAjBgBjB,S","file":"groups.dao.js","sourcesContent":["import sql from './sql/index';\nimport db from '../../config/database';\n\nexport default class GroupsDao {\n\n    static all() {\n        return db.any(sql.select);\n    }\n\n    static save(group) {\n        return db.task(t => {\n            return t.oneOrNone(sql.selectByGroupId, group.id, g => g && g.steam_group_id_64)\n                .then(groupId => {\n                    return groupId || t.none(sql.create, [group.id, group.name, group.siteUrl]);\n                });\n        });\n    }\n\n    static selectByGroupId(idGroup){\n        return db.any(sql.selectByGroupId, [idGroup]);\n    }\n\n}\n"]}